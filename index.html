<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" property="og:title" content="Virtual Campus Tour">
    <meta name="description" property="og:description" content="Explore FPT Campuses in Vietnam from your home. Navigate around our campuses and its surroundings through this interactive experience">
    <meta name="image" property="og:image" content="https://campus.fpt-software.com/worldm/en/assets/thumb-en.jpg">
    <meta name="url" property="og:url" content="https://campus.fpt-software.com">

    <title>FPT MAP</title>

    <link rel="icon" type="image/png" href="./assets/favicon.jpg" />
    <link rel="stylesheet" href="./fptstyle.css" />

    <script type="text/javascript">
        if (!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            // Redirecion on mobile
            const urlPC = "https://campus.fpt-software.com/world/en";
            window.location.assign(urlPC);
        }
    </script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container-fluid" id="mount">
        <div id="preload">
            <div class="loader"></div>
        </div>
        <!-- Top logo -->
        <!-- <div class="row">
            <div class='col-2 offset-5'>
                <img id="fptlogo" src="./assets/fpt-logo.png" />
            </div>
        </div> -->

        <!-- Language Switch -->
        <div class="language">
            <div class="flexRow">
                <div id="flag-en" class='flag' title="English" @click="hrefLink('/worldm/en')"></div>
                <div id='flag-jp' class='flag' title="Japanese" @click="hrefLink('/worldm/jp')"></div>
            </div>
        </div>


        <!-- Navbar  -->
        <div class="row myNav justify-content-center gx-1">
            <div class="col-4 navOption color-blue text-center" @click="navClick(3)">
                Asia <span class="arrow" :class="[activeNav !== 3 ? 'hide' : '']"><img src="./assets/arrow.png"/></span>
            </div>
            <div class="col-4 navOption color-blue text-center" @click="navClick(2)">
                Europe <span class="arrow" :class="[activeNav !== 2 ? 'hide' : '']"><img src="./assets/arrow.png"/></span>
            </div>
            <div class="col-4 navOption color-blue text-center" @click="navClick(1)">
                America <span class="arrow" :class="[activeNav !== 1 ? 'hide' : '']"><img src="./assets/arrow.png"/></span>
            </div>
        </div>

        <!-- Bot Info -->
        <div id="botInfo" class="content" :class="[activeNav !== 0 ? 'hide' : '']">
            <div class="flexColumn">
                <div class='col-6'>
                    <img id="fptlogo" src="./assets/fpt-logo.png" @click="hrefLink('https://www.fpt-software.com/')" />
                </div>
                <div>
                    <h2 class="color-blue">Global Presence</h2>
                </div>
                <div>
                    <h2 class="color-orange">26</h2>
                    <h3>Countries & Territories</h3>
                </div>
                <div>
                    <h2 class="color-orange">57 </h2>
                    <h3>Offices</h3>
                </div>
                <div>
                    <h2 class="color-orange">22 </h2>
                    <h3>Development Centers</h3>
                </div>
                <div id="shortcut-button" @click="openTour('Hanoi')">
                    Hanoi - Headquarters
                </div>
            </div>
        </div>

        <!-- Main content -->
        <div class="content row" :class="{hide: isLevel2}">
            <div id="AsiaGroup" :class="[activeNav !== 3 ? 'hide' : '']">
                <div>
                    <h3 class="country color-orange" id='Vietnam' @click="clickCountry('Vietnam')">Vietnam (Headquarters)</h3>
                </div>
                <div class="flexRow">
                    <div class="flexColumn SubGroup col-6" id="AsiaSubGroup1">
                        <p class="country" @click="clickCountry('Australia')">Australia</p>
                        <p class="country" @click="clickCountry('China')">China</p>
                        <p class="country" @click="clickCountry('Hongkong')">Hongkong</p>
                        <p class="country" @click="clickCountry('India')">India</p>
                        <p class="country" @click="clickCountry('Indonesia')">Indonesia</p>
                        <p class="country" id='JP' @click="clickCountry('Japan')">Japan</p>
                        <p class="country" @click="clickCountry('Malaysia')">Malaysia</p>
                    </div>
                    <div class="flexColumn SubGroup col-6" id="AsiaSubGroup2">
                        <p class="country" @click="clickCountry('Myanmar')">Myanmar</p>
                        <p class="country" @click="clickCountry('Philippines')">Philippines</p>
                        <p class="country" @click="clickCountry('Singapore')">Singapore</p>
                        <p class="country" @click="clickCountry('South Korea')">South Korea</p>
                        <p class="country" @click="clickCountry('Taiwan')">Taiwan</p>
                        <p class="country" @click="clickCountry('Thailand')">Thailand</p>
                        <p class="country" @click="clickCountry('UAE')">UAE</p>
                    </div>
                </div>
            </div>

            <div id="EuropeGroup" :class="[activeNav !== 2 ? 'hide' : '']">
                <div class="flexRow">
                    <div class="flexColumn SubGroup col-6" id="EuropeSubGroup1">
                        <p class="country" @click="clickCountry('Germany')">Germany</p>
                        <p class="country" @click="clickCountry('France')">France</p>
                        <p class="country" @click="clickCountry('Slovakia')">Slovakia</p>
                    </div>
                    <div class="flexColumn SubGroup col-6" id="EuropeSubGroup2">
                        <p class="country" @click="clickCountry('Czech Republic')">Czech Republic</p>
                        <p class="country" @click="clickCountry('UK')">United Kingdom</p>
                        <p class="country" @click="clickCountry('Belgium')">Belgium</p>
                    </div>
                </div>
            </div>

            <div id="AmericaGroup" :class="[activeNav !== 1 ? 'hide' : '']">
                <div class="flexRow">
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCountry('USA')">USA</p>
                        <p class="country" @click="clickCountry('Canada')">Canada</p>
                    </div>
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCountry('Colombia')">Colombia</p>
                        <p class="country" @click="clickCountry('Costa Rica')">Costa Rica</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Background map -->
        <div id="backgroundMap">
        </div>
        <span id="dismissBrief" class="hide" @click="dismissBrief()"><img src="./assets/crosshair.png"/></span>

        <!-- Level 2 details -->
        <div class="content row" :class="{hide: !isLevel2}">
            <div id="VietnamGroup" :class="{hide: !isVietnam}">
                <div>
                    <h2>Vietnam</h2>
                </div>
                <div class="flexRow">
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCity('Vietnam', 'Hanoi')">Hanoi</p>
                        <p class="country hide" id="hanoi" @click="openTour('Hanoi')">Hanoi</p>
                        <p class="country" @click="clickCity('Vietnam', 'Da Nang')">Da Nang</p>
                        <!-- // DN EN
                        // 892d9d31-3f67-5474-677d-0cf3aba33262-vod-e060b3d5-07e2-4cac-6bc8-f4d3fee74d53
                        // DN JP 
                        // 892d9d31-3f67-5474-677d-0cf3aba33262-vod-fdbc2bdf-3705-3dd6-5150-6e3223425f1b -->
                        <p class="country hide" id="danang" @click="openVideo('Vietnam', '892d9d31-3f67-5474-677d-0cf3aba33262-vod-e060b3d5-07e2-4cac-6bc8-f4d3fee74d53')">Da Nang</p>
                        <p class="country" @click="clickCity('Vietnam', 'Quy Nhon')">Quy Nhon</p>
                    </div>
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCity('Vietnam', 'Ho Chi Minh')">Ho Chi Minh</p>
                        <p class="country" @click="clickCity('Vietnam', 'Can Tho')">Can Tho</p>
                    </div>
                </div>
            </div>
            <div id="JapanGroup" :class="{hide: !isJapan}">
                <div>
                    <h2>Japan</h2>
                </div>
                <div class="flexRow">
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCity('Japan', 'Fukuoka Branch')">Fukuoka Branch</p>
                        <p class="country" @click="clickCity('Japan', 'Hiroshima Branch')">Hiroshima Branch</p>
                        <p class="country" @click="clickCity('Japan', 'Nagoya Branch')">Nagoya Branch</p>
                        <p class="country" @click="clickCity('Japan', 'Osaka Branch')">Osaka Branch</p>
                        <p class="country" @click="clickCity('Japan', 'Sapporo Branch')">Sapporo Branch</p>
                        <p class="country" @click="clickCity('Japan', 'Yokohama Branch')">Yokohama Branch</p>
                    </div>
                    <div class="flexColumn SubGroup col-6">
                        <p class="country" @click="clickCity('Japan', 'Tokyo Head Quarter')">Tokyo Head Quarter</p>
                        <p class="country" @click="clickCity('Japan', 'FPT Japanese School')">FPT Japanese School</p>
                        <p class="country" @click="clickCity('Japan', 'FPT Okinawa Development Center')">FPT Okinawa Development Center</p>
                        <p class="country" @click="clickCity('Japan', 'Kariya Development Center')">Kariya Development Center</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Brief -->
        <div class="content row" id="brief" :class="{hide: !briefShow}"></div>

        <!-- Video player -->
        <div class="video-wrapper">
            <span id="skipVideoButton" class="UI" :class="{hide: !isVideoShowing}" @click="dismissVideo()"><img src="./assets/crosshair.png"/></span>
            <div id="player" :class="{hide: !isVideoShowing}">
            </div>
        </div>

        <span id="backButton" class="UI" :class="{hide: !isBackButtonShow}" @click="backToWorld()"><img src="./assets/crosshair.png"/></span>

        <div class="loader" :class="{hide: !isLoading}"></div>
        <div class="loader hide" id="loaderTrigger" @click="loaderHide()"></div>
    </div>

    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@3.2.4"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.4/dist/vue.global.prod.js"></script>
    <script src="https://player.dacast.com/js/player.js?contentId=1552_f_297509"></script>
    <script>
        var tooltipData, translate;
        window.onload = function() {
            fetch('./data/en.json').then(res => res.json()).then(function(data) {
                console.log(data);
                tooltipData = data["tooltip"];
                translate = data["translate"];
                document.getElementById('preload').style.display = "none";
            })

        };

        const vm = Vue.createApp({
            data() {
                return {
                    activeNav: 0,
                    briefShow: false,
                    isLoading: false,
                    isVideoShowing: false,
                    isBackButtonShow: false,
                    countryCurrentVideo: "",
                    isLevel2: false,
                    isVietnam: false,
                    isJapan: false,
                    tourSrc: "https://campus.fpt-software.com/en/"
                }
            },
            methods: {
                navClick(id) {
                    this.dismissBrief();
                    this.setStateToLevel1();
                    if (this.activeNav === id) {
                        this.activeNav = 0;
                        document.getElementById('backgroundMap').style.backgroundImage = "url(./assets/worldmapid.svg)";
                    } else {
                        this.activeNav = id;
                        switch (id) {
                            case 1:
                                document.getElementById('backgroundMap').style.backgroundImage = "url(./assets/worldmap-america.svg)";
                                break;
                            case 2:
                                document.getElementById('backgroundMap').style.backgroundImage = "url(./assets/worldmap-europe.svg)";
                                break;
                            case 3:
                                document.getElementById('backgroundMap').style.backgroundImage = "url(./assets/worldmap-asia.svg)";
                                break;
                        }
                    }
                },
                clickCountry(country) {
                    if (country === "Vietnam" || country === "Japan") {
                        this.activateLevel2(country);
                        return;
                    } else {
                        this.activateLevel1(country);
                    }

                },
                dismissBrief() {
                    this.briefShow = false;
                    document.getElementById('brief').innerHTML = "";
                },
                activateLevel1(country) {
                    var newData = "";
                    newData += "<span id='dismissButton' onClick='tooltipDismiss()''><img src='./assets/crosshair.png'/></span>";
                    newData += "<h2 class='color-orange'>" + country + "</h2>";
                    console.log(country);
                    console.log(tooltipData[country]);
                    for (const [city, address] of Object.entries(tooltipData[country])) {
                        newData += "<p>" + city + ":<br>" + address + "</p>";
                    }
                    console.log(newData);
                    document.getElementById('brief').innerHTML = newData;
                    document.getElementById('brief').scrollIntoView({
                        behavior: "smooth",
                        block: 'start'
                    });
                    this.briefShow = true;
                },
                activateLevel2(country) {
                    if (country === "Vietnam" || country === "Japan") {
                        this.activateLevel2PreContent(country);
                        return;
                    } else {}
                },
                activateLevel2PreContent(country) {
                    this.dismissBrief();
                    var urlvideoid = ""
                    switch (country) {
                        case "Vietnam":
                            // Clip Vietnam-EN
                            urlvideoid = "892d9d31-3f67-5474-677d-0cf3aba33262-vod-eb433728-d63b-9782-9f48-12aedda1b4f1";
                            break;
                        case "Japan":
                            // Clip Japan-JP
                            urlvideoid = "892d9d31-3f67-5474-677d-0cf3aba33262-vod-47523b96-8209-3dde-d61d-3757f30bc325";
                            break;
                        default:
                            urlvideoid = "";
                            break;
                    }

                    this.isVideoShowing = true;
                    this.countryCurrentVideo = country;
                    this.isLoading = true;
                    this.activeNav = -1;
                    if (urlvideoid !== "") {
                        initVideo(urlvideoid);
                    }
                },
                activateLevel2Content(country) {
                    this.isLevel2 = true;
                    switch (country) {
                        case "Vietnam":
                            this.isVietnam = true;
                            this.changeBackgroundLevel2("Vietnam");
                            break;
                        case "Japan":
                            this.isJapan = true;
                            this.changeBackgroundLevel2("Japan");
                            break;
                        default:
                            break;
                    }
                },
                clickCity(country, city) {
                    var newData = "";
                    newData += "<span id='dismissButton' onClick='tooltipDismiss()''><img src='./assets/crosshair.png'/></span>";
                    newData += "<h2 class='color-orange'>" + city + "</h2>";
                    console.log(city);

                    for (const [cityName, address] of Object.entries(tooltipData[country][city])) {
                        if (address === "") {
                            newData += "<p>" + cityName + "</p>";
                        } else {
                            newData += "<p>" + cityName + ":<br>" + address + "</p>";
                        }
                    }
                    console.log(newData);
                    document.getElementById('brief').innerHTML = newData;
                    document.getElementById('brief').scrollIntoView({
                        behavior: "smooth",
                        block: 'start'
                    });
                    this.briefShow = true;
                },
                setStateToLevel1() {
                    this.isVietnam = false;
                    this.isJapan = false;
                    this.isLevel2 = false;
                    this.dismissBrief();
                },
                dismissVideo() {
                    this.isVideoShowing = false;
                    this.isLoading = false;
                    stopCurrentVideo();
                    this.activateLevel2Content(this.countryCurrentVideo);
                },
                changeBackgroundLevel2(name) {
                    console.log('map changed level 2');
                    document.getElementById('backgroundMap').style.backgroundImage = "url(./assets/zoom-" + name + "-m.svg)";
                },
                openTour(city) {
                    linkToTour(this.tourSrc);
                },
                openVideo(country, video) {
                    this.setStateToLevel1();
                    this.isVideoShowing = true;
                    this.countryCurrentVideo = country;
                    this.isLoading = true;
                    this.activeNav = -1;
                    initVideo(video);
                },
                hrefLink(link) {
                    // window.open(link);
                    window.location = link;
                },
                loaderHide() {
                    this.isLoading = false;
                }
            },
            computed: {

            }
        }).mount("#mount")



        function tooltipDismiss() {
            document.getElementById('dismissBrief').click();
        };

        function clickTour(city) {
            document.getElementById('hanoi').click();
        }

        // DN EN
        // 892d9d31-3f67-5474-677d-0cf3aba33262-vod-e060b3d5-07e2-4cac-6bc8-f4d3fee74d53
        // DN JP 
        // 892d9d31-3f67-5474-677d-0cf3aba33262-vod-fdbc2bdf-3705-3dd6-5150-6e3223425f1b
        function clickVideo(video) {
            document.getElementById('danang').click();
        }

        function linkToTour(link) {
            parent.window.location = link;
        }

        // Video API
        var currentVidId = "";
        var vidPlayer

        function initVideo(CONTENT_ID) {
            currentVidId = CONTENT_ID;
            var scrWid = window.screen.width;
            if (CONTENT_ID === "") return;
            vidPlayer = dacast(CONTENT_ID, 'player', {
                width: scrWid,
                height: scrWid / 16 * 9
            });

            vidPlayer.onError(function(err) {
                // alert('Oops! An error occured!');
                console.log("error type:", err.dc_type);
                console.log("error msg:", err.dc_message);
                vidPlayer.stop();
                vidPlayer.dispose();
                document.getElementById('skipVideoButton').click();
            });

            vidPlayer.onReady(function() {
                document.getElementById('loaderTrigger').click();
            })

            vidPlayer.onComplete(function() {
                console.log('Video Ended')
                document.getElementById('skipVideoButton').click();
            });
        };

        function stopCurrentVideo() {
            console.log("stop video");
            try {
                vidPlayer.stop();
                vidPlayer.dispose();
            } catch (e) {
                console.log(e)
            }
        }
    </script>
</body>

</html>